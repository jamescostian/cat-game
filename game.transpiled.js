(function(){'use strict';function a(n,o){return Math.floor(Math.random()*(o-n+1))+n}function b(n){return new Promise(o=>setTimeout(o,n))}function c(n,o,p){return new Promise(q=>{n='in'===n;const r=window.performance.now(),s=()=>{let t=100*((window.performance.now()-r)/p);99<=t?(o.style.opacity=n?1:0,q()):(o.style.opacity=n?t/100:1-t/100,window.requestAnimationFrame(s))};s()})}function d(n,o,p){return new Promise(q=>{n.style.opacity=0,c('in',n,p).then(()=>b(o)).then(()=>c('out',n,p)).then(q)})}const e=[1.5,1.51,1.332857142857143,1.51,1.5,1,1.5,1,1.2542857142857142],f=e.length-1,g=e.map((n,o)=>{return{wth:n,url:'cats/'+o+'.jpg',id:o,duration:800-500*(o/f),delay:800-500*(o/f),width:40-25*(o/f)+'%'}});g[0].width='50%',g[0].duration=1000,g[0].delay=3000;const h=5;let i=!1;const j=()=>document.querySelector('.cats').children.length,k=(n,o,p)=>{const q=100-parseInt(n.width,10),r=parseInt(n.width,10)/100*o,s=r/n.wth;return{top:a(h,100-100*(s/p)-h)+'%',left:a(h,q-h)+'%'}},l=n=>{let o=document.createElement('img');o.classList.add('cat'),o.setAttribute('src',n.url),o.setAttribute('width',n.width),o.setAttribute('style','user-drag: none; -moz-user-select: none; -webkit-user-drag: none;'),o.style.position='fixed';const p=k(n,window.innerWidth,window.innerHeight);o.style.top=p.top,o.style.left=p.left;const q=()=>{o.parentNode.removeChild(o),0===n.id?(i=Date.now(),l(g[1]),l(g[1])):n.id+1<g.length&&0.3<Math.random()?(l(g[n.id+1]),0.8<Math.random()&&l(g[n.id+1])):1!==n.id&&0.7<Math.random()?l(g[n.id-1]):(0.2<Math.random()||2>j())&&l(g[n.id])};o.addEventListener('click',q),o.addEventListener('touchstart',q),document.querySelector('.cats').appendChild(o),d(o,n.delay,n.duration).then(()=>{o.parentNode&&o.parentNode.removeChild(o),setTimeout(m,a(10,40))})};let m=()=>{if(1<=j())return!1;m=()=>{};const n=i?Date.now()-i:0;document.querySelector('.left').textContent='After '+(n/1000).toFixed(3)+'s',document.querySelector('.big').textContent='You lost!',document.querySelector('.right').innerHTML=`
      See <a href=https://github.com/jamescostian/jamescostian.github.io>the code</a>,<br>
      <a href="resume.pdf">my résumé</a>,<br>
      or <a href="?">play again</a>
    `};window.addEventListener('load',()=>{const n=!!document.cookie;let o=new Date;o.setDate(o.getDate()+1),document.cookie='recently=seen; expires='+o.toUTCString()+'; path=/',setTimeout(()=>l(g[0]),n?1750:3000)})})();
